{"sha":"2956aa340e480396fd5a37d558477f6e7ce9878b","node_id":"MDY6Q29tbWl0NTI5ODc5MDoyOTU2YWEzNDBlNDgwMzk2ZmQ1YTM3ZDU1ODQ3N2Y2ZTdjZTk4Nzhi","commit":{"author":{"name":"Beat KÃ¼ng","email":"beat-kueng@gmx.net","date":"2020-08-27T14:15:43Z"},"committer":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2020-09-13T22:31:37Z"},"message":"module: increase max timeout for stopping modules from 2s to 5s\n\nThe gps module might take up to 4s to stop (if stopped during module\nconfiguration).","tree":{"sha":"0fb6833ccc5866e6bd3477754bb3174159468063","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/0fb6833ccc5866e6bd3477754bb3174159468063"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/2956aa340e480396fd5a37d558477f6e7ce9878b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/2956aa340e480396fd5a37d558477f6e7ce9878b","html_url":"https://github.com/PX4/PX4-Autopilot/commit/2956aa340e480396fd5a37d558477f6e7ce9878b","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/2956aa340e480396fd5a37d558477f6e7ce9878b/comments","author":{"login":"bkueng","id":281593,"node_id":"MDQ6VXNlcjI4MTU5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/281593?v=4","gravatar_id":"","url":"https://api.github.com/users/bkueng","html_url":"https://github.com/bkueng","followers_url":"https://api.github.com/users/bkueng/followers","following_url":"https://api.github.com/users/bkueng/following{/other_user}","gists_url":"https://api.github.com/users/bkueng/gists{/gist_id}","starred_url":"https://api.github.com/users/bkueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bkueng/subscriptions","organizations_url":"https://api.github.com/users/bkueng/orgs","repos_url":"https://api.github.com/users/bkueng/repos","events_url":"https://api.github.com/users/bkueng/events{/privacy}","received_events_url":"https://api.github.com/users/bkueng/received_events","type":"User","site_admin":false},"committer":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"parents":[{"sha":"531242468eafbf17a38fbf1fc0e3f64fa61a781a","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/531242468eafbf17a38fbf1fc0e3f64fa61a781a","html_url":"https://github.com/PX4/PX4-Autopilot/commit/531242468eafbf17a38fbf1fc0e3f64fa61a781a"}],"stats":{"total":6,"additions":4,"deletions":2},"files":[{"sha":"e55795dc5d6a7fd703b4d4f5be54919a2444e2d0","filename":"platforms/common/include/px4_platform_common/module.h","status":"modified","additions":4,"deletions":2,"changes":6,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/2956aa340e480396fd5a37d558477f6e7ce9878b/platforms%2Fcommon%2Finclude%2Fpx4_platform_common%2Fmodule.h","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/2956aa340e480396fd5a37d558477f6e7ce9878b/platforms%2Fcommon%2Finclude%2Fpx4_platform_common%2Fmodule.h","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fcommon%2Finclude%2Fpx4_platform_common%2Fmodule.h?ref=2956aa340e480396fd5a37d558477f6e7ce9878b","patch":"@@ -239,10 +239,12 @@ class ModuleBase\n \n \t\t\t\tdo {\n \t\t\t\t\tunlock_module();\n-\t\t\t\t\tpx4_usleep(20000); // 20 ms\n+\t\t\t\t\tpx4_usleep(10000); // 10 ms\n \t\t\t\t\tlock_module();\n \n-\t\t\t\t\tif (++i > 100 && _task_id != -1) { // wait at most 2 sec\n+\t\t\t\t\tif (++i > 500 && _task_id != -1) { // wait at most 5 sec\n+\t\t\t\t\t\tPX4_ERR(\"timeout, forcing stop\");\n+\n \t\t\t\t\t\tif (_task_id != task_id_is_work_queue) {\n \t\t\t\t\t\t\tpx4_task_delete(_task_id);\n \t\t\t\t\t\t}"}]}