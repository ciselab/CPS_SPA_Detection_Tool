{"sha":"5491f9b8f953664273c63547a8ee5ce794b3c3c7","node_id":"MDY6Q29tbWl0NTI5ODc5MDo1NDkxZjliOGY5NTM2NjQyNzNjNjM1NDdhOGVlNWNlNzk0YjNjM2M3","commit":{"author":{"name":"Julian Oes","email":"julian@oes.ch","date":"2019-11-01T16:49:25Z"},"committer":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2019-11-02T13:47:54Z"},"message":"px_uploader.py: increase estimated erase time\n\nThe 9 seconds to erase a board probably still come from the FMU-v1 and\nPixhawks with only 1 MB flash. By now, many targets have 2 MB flash and\ntake a bit longer to erase. Therefore, we can increase the estimated\ntime a bit and don't need to resort to the timeout notice.","tree":{"sha":"a03b23ce4a1c83219a0536e66a7d0b70564aa9a9","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/a03b23ce4a1c83219a0536e66a7d0b70564aa9a9"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/5491f9b8f953664273c63547a8ee5ce794b3c3c7","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/5491f9b8f953664273c63547a8ee5ce794b3c3c7","html_url":"https://github.com/PX4/PX4-Autopilot/commit/5491f9b8f953664273c63547a8ee5ce794b3c3c7","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/5491f9b8f953664273c63547a8ee5ce794b3c3c7/comments","author":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"committer":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"parents":[{"sha":"d657a4ee834fb859319451b38e04525630a84e20","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/d657a4ee834fb859319451b38e04525630a84e20","html_url":"https://github.com/PX4/PX4-Autopilot/commit/d657a4ee834fb859319451b38e04525630a84e20"}],"stats":{"total":10,"additions":5,"deletions":5},"files":[{"sha":"ed8c10679241735c875c2de040bded10b4e5f6f8","filename":"Tools/px_uploader.py","status":"modified","additions":5,"deletions":5,"changes":10,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/5491f9b8f953664273c63547a8ee5ce794b3c3c7/Tools%2Fpx_uploader.py","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/5491f9b8f953664273c63547a8ee5ce794b3c3c7/Tools%2Fpx_uploader.py","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/Tools%2Fpx_uploader.py?ref=5491f9b8f953664273c63547a8ee5ce794b3c3c7","patch":"@@ -405,10 +405,10 @@ def __erase(self, label):\n         deadline = time.time() + 30.0\n         while time.time() < deadline:\n \n-            # Draw progress bar (erase usually takes about 9 seconds to complete)\n+            usualEraseDuration = 15.0\n             estimatedTimeRemaining = deadline-time.time()\n-            if estimatedTimeRemaining >= 9.0:\n-                self.__drawProgressBar(label, 30.0-estimatedTimeRemaining, 9.0)\n+            if estimatedTimeRemaining >= usualEraseDuration:\n+                self.__drawProgressBar(label, 30.0-estimatedTimeRemaining, usualEraseDuration)\n             else:\n                 self.__drawProgressBar(label, 10.0, 10.0)\n                 sys.stdout.write(\" (timeout: %d seconds) \" % int(deadline-time.time()))\n@@ -733,13 +733,13 @@ def main():\n             pyserial_installed = True\n     except:\n         pass\n-    \n+\n     try:\n         if serial.VERSION:\n             pyserial_installed = True\n     except:\n         pass\n-    \n+\n     if not pyserial_installed:\n         print(\"Error: pyserial not installed!\")\n         print(\"    (Install using: sudo pip install pyserial)\")"}]}