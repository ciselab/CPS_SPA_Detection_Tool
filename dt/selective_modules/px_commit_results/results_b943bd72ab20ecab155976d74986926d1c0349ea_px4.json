{"sha":"b943bd72ab20ecab155976d74986926d1c0349ea","node_id":"MDY6Q29tbWl0NTI5ODc5MDpiOTQzYmQ3MmFiMjBlY2FiMTU1OTc2ZDc0OTg2OTI2ZDFjMDM0OWVh","commit":{"author":{"name":"Jacob Dahl","email":"37091262+dakejahl@users.noreply.github.com","date":"2019-11-07T15:03:59Z"},"committer":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2019-11-07T15:03:59Z"},"message":"commander: Added a parameter to control the timeout period for disarming after the kill switch is engaged. (#13325)","tree":{"sha":"29400f0dd79305a6551d9dee8507e700696ffae4","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/29400f0dd79305a6551d9dee8507e700696ffae4"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/b943bd72ab20ecab155976d74986926d1c0349ea","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/b943bd72ab20ecab155976d74986926d1c0349ea","html_url":"https://github.com/PX4/PX4-Autopilot/commit/b943bd72ab20ecab155976d74986926d1c0349ea","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/b943bd72ab20ecab155976d74986926d1c0349ea/comments","author":{"login":"dakejahl","id":37091262,"node_id":"MDQ6VXNlcjM3MDkxMjYy","avatar_url":"https://avatars.githubusercontent.com/u/37091262?v=4","gravatar_id":"","url":"https://api.github.com/users/dakejahl","html_url":"https://github.com/dakejahl","followers_url":"https://api.github.com/users/dakejahl/followers","following_url":"https://api.github.com/users/dakejahl/following{/other_user}","gists_url":"https://api.github.com/users/dakejahl/gists{/gist_id}","starred_url":"https://api.github.com/users/dakejahl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dakejahl/subscriptions","organizations_url":"https://api.github.com/users/dakejahl/orgs","repos_url":"https://api.github.com/users/dakejahl/repos","events_url":"https://api.github.com/users/dakejahl/events{/privacy}","received_events_url":"https://api.github.com/users/dakejahl/received_events","type":"User","site_admin":false},"committer":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"parents":[{"sha":"1896c758d00e5179681f016516054a79a9ba16ea","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/1896c758d00e5179681f016516054a79a9ba16ea","html_url":"https://github.com/PX4/PX4-Autopilot/commit/1896c758d00e5179681f016516054a79a9ba16ea"}],"stats":{"total":16,"additions":15,"deletions":1},"files":[{"sha":"9f469fbb1d6acb25280a4963e10f3646572e0ef0","filename":"src/modules/commander/Commander.cpp","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/b943bd72ab20ecab155976d74986926d1c0349ea/src%2Fmodules%2Fcommander%2FCommander.cpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/b943bd72ab20ecab155976d74986926d1c0349ea/src%2Fmodules%2Fcommander%2FCommander.cpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fcommander%2FCommander.cpp?ref=b943bd72ab20ecab155976d74986926d1c0349ea","patch":"@@ -558,7 +558,6 @@ Commander::Commander() :\n \t_failure_detector(this)\n {\n \t_auto_disarm_landed.set_hysteresis_time_from(false, _param_com_disarm_preflight.get() * 1_s);\n-\t_auto_disarm_killed.set_hysteresis_time_from(false, 5_s);\n \n \t// We want to accept RC inputs as default\n \tstatus.rc_input_mode = vehicle_status_s::RC_IN_MODE_DEFAULT;\n@@ -1549,6 +1548,8 @@ Commander::run()\n \n \t\t\tparam_get(_param_takeoff_finished_action, &takeoff_complete_act);\n \n+\t\t\t_auto_disarm_killed.set_hysteresis_time_from(false, _param_com_kill_disarm.get() * 1_s);\n+\n \t\t\t/* check for unsafe Airmode settings: yaw airmode requires the use of an arming switch */\n \t\t\tif (_param_airmode != PARAM_INVALID && _param_rc_map_arm_switch != PARAM_INVALID) {\n \t\t\t\tparam_get(_param_airmode, &airmode);"},{"sha":"d304fdd25884d78044058a693a0d8762861cb3d1","filename":"src/modules/commander/Commander.hpp","status":"modified","additions":2,"deletions":0,"changes":2,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/b943bd72ab20ecab155976d74986926d1c0349ea/src%2Fmodules%2Fcommander%2FCommander.hpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/b943bd72ab20ecab155976d74986926d1c0349ea/src%2Fmodules%2Fcommander%2FCommander.hpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fcommander%2FCommander.hpp?ref=b943bd72ab20ecab155976d74986926d1c0349ea","patch":"@@ -149,6 +149,8 @@ class Commander : public ModuleBase<Commander>, public ModuleParams\n \t\t(ParamInt<px4::params::COM_PREARM_MODE>) _param_com_prearm_mode,\n \t\t(ParamInt<px4::params::COM_MOT_TEST_EN>) _param_com_mot_test_en,\n \n+\t\t(ParamFloat<px4::params::COM_KILL_DISARM>) _param_com_kill_disarm,\n+\n \t\t(ParamInt<px4::params::CBRK_SUPPLY_CHK>) _param_cbrk_supply_chk,\n \t\t(ParamInt<px4::params::CBRK_USB_CHK>) _param_cbrk_usb_chk,\n \t\t(ParamInt<px4::params::CBRK_AIRSPD_CHK>) _param_cbrk_airspd_chk,"},{"sha":"c1e3354ebf35823b3e153523201b676badf8b23d","filename":"src/modules/commander/commander_params.c","status":"modified","additions":11,"deletions":0,"changes":11,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/b943bd72ab20ecab155976d74986926d1c0349ea/src%2Fmodules%2Fcommander%2Fcommander_params.c","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/b943bd72ab20ecab155976d74986926d1c0349ea/src%2Fmodules%2Fcommander%2Fcommander_params.c","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fcommander%2Fcommander_params.c?ref=b943bd72ab20ecab155976d74986926d1c0349ea","patch":"@@ -977,3 +977,14 @@ PARAM_DEFINE_INT32(COM_PREARM_MODE, 1);\n  * @group Commander\n  */\n PARAM_DEFINE_INT32(COM_MOT_TEST_EN, 1);\n+\n+/**\n+ * Timeout value for disarming when kill switch is engaged\n+ *\n+ * @group Commander\n+ * @unit s\n+ * @min 0.0\n+ * @max 30.0\n+ * @increment 0.1\n+ */\n+PARAM_DEFINE_FLOAT(COM_KILL_DISARM, 5.0f);\n\\ No newline at end of file"}]}