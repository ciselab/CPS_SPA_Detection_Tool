{"sha":"31fe7af45453394feda9d253fb056be9ba7a1999","node_id":"MDY6Q29tbWl0NTI5ODc5MDozMWZlN2FmNDU0NTMzOTRmZWRhOWQyNTNmYjA1NmJlOWJhN2ExOTk5","commit":{"author":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2020-06-03T22:11:32Z"},"committer":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2020-06-05T00:59:52Z"},"message":"selectively increase optimization -Os -> -O2\n\n - targetted at modules/libraries that benefit without drastically\nincreasing flash usage\n - ignored on boards with CONSTRAINED_FLASH set","tree":{"sha":"441e4072d66f5ad2a1f6d494d293eeb31daa425b","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/441e4072d66f5ad2a1f6d494d293eeb31daa425b"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/31fe7af45453394feda9d253fb056be9ba7a1999","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/31fe7af45453394feda9d253fb056be9ba7a1999","html_url":"https://github.com/PX4/PX4-Autopilot/commit/31fe7af45453394feda9d253fb056be9ba7a1999","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/31fe7af45453394feda9d253fb056be9ba7a1999/comments","author":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"committer":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"parents":[{"sha":"7f73b9a1313ff7a93c50e10dcaf94c3cb3e6bef5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/7f73b9a1313ff7a93c50e10dcaf94c3cb3e6bef5","html_url":"https://github.com/PX4/PX4-Autopilot/commit/7f73b9a1313ff7a93c50e10dcaf94c3cb3e6bef5"}],"stats":{"total":105,"additions":71,"deletions":34},"files":[{"sha":"7ea47640f4a86e4c9aede51e99f7063c25ff9aeb","filename":"CMakeLists.txt","status":"modified","additions":12,"deletions":0,"changes":12,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/CMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/CMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/CMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -181,6 +181,18 @@ if(NOT CMAKE_BUILD_TYPE)\n \tset(CMAKE_BUILD_TYPE ${PX4_BUILD_TYPE} CACHE STRING \"Build type\" FORCE)\n endif()\n \n+if((CMAKE_BUILD_TYPE STREQUAL \"Debug\") OR (CMAKE_BUILD_TYPE STREQUAL \"Coverage\"))\n+\tset(MAX_CUSTOM_OPT_LEVEL -O0)\n+elseif(CMAKE_BUILD_TYPE MATCHES \"Sanitizer\")\n+\tset(MAX_CUSTOM_OPT_LEVEL -O1)\n+else()\n+\tif(px4_constrained_flash_build)\n+\t\tset(MAX_CUSTOM_OPT_LEVEL -Os)\n+\telse()\n+\t\tset(MAX_CUSTOM_OPT_LEVEL -O2)\n+\tendif()\n+endif()\n+\n set_property(CACHE CMAKE_BUILD_TYPE PROPERTY STRINGS \"Debug;Release;RelWithDebInfo;MinSizeRel;Coverage;AddressSanitizer;UndefinedBehaviorSanitizer\")\n message(STATUS \"cmake build type: ${CMAKE_BUILD_TYPE}\")\n "},{"sha":"bd6f7f6786c82a20b2043e7d3e985eb4f0fcab9d","filename":"boards/bitcraze/crazyflie/default.cmake","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fbitcraze%2Fcrazyflie%2Fdefault.cmake","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fbitcraze%2Fcrazyflie%2Fdefault.cmake","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/boards%2Fbitcraze%2Fcrazyflie%2Fdefault.cmake?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -6,6 +6,7 @@ px4_add_board(\n \tTOOLCHAIN arm-none-eabi\n \tARCHITECTURE cortex-m4\n \tROMFSROOT px4fmu_common\n+\tCONSTRAINED_FLASH\n \tDRIVERS\n \t\tbarometer/lps25h\n \t\tdistance_sensor/vl53l0x"},{"sha":"44bf1edf1bc6210bc4a265d4cc8e0cff4376dbca","filename":"boards/holybro/durandal-v1/stackcheck.cmake","status":"modified","additions":7,"deletions":5,"changes":12,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fholybro%2Fdurandal-v1%2Fstackcheck.cmake","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fholybro%2Fdurandal-v1%2Fstackcheck.cmake","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/boards%2Fholybro%2Fdurandal-v1%2Fstackcheck.cmake?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -7,7 +7,7 @@ px4_add_board(\n \tTOOLCHAIN arm-none-eabi\n \tARCHITECTURE cortex-m7\n \tROMFSROOT px4fmu_common\n-\tBUILD_BOOTLOADER\n+\t#BUILD_BOOTLOADER\n \tIO px4_io-v2_default\n \tTESTING\n #\tUAVCAN_INTERFACES 2  - No H7 or FD can support in UAVCAN\n@@ -23,7 +23,7 @@ px4_add_board(\n \t\tbatt_smbus\n \t\t#camera_capture\n \t\t#camera_trigger\n-\t\tdifferential_pressure # all available differential pressure drivers\n+\t\t#differential_pressure # all available differential pressure drivers\n \t\tdistance_sensor # all available distance sensor drivers\n \t\t#dshot\n \t\tgps\n@@ -65,6 +65,7 @@ px4_add_board(\n \t\tcommander\n \t\tdataman\n \t\tekf2\n+\t\t#esc_battery\n \t\tevents\n \t\tfw_att_control\n \t\tfw_pos_control_l1\n@@ -78,16 +79,17 @@ px4_add_board(\n \t\tmc_hover_thrust_estimator\n \t\tmc_pos_control\n \t\tmc_rate_control\n+\t\t#micrortps_bridge\n \t\tnavigator\n \t\trc_update\n \t\t#rover_pos_control\n \t\tsensors\n \t\t#sih\n-\t\ttemperature_compensation\n-\t\tvmount\n+\t\t#temperature_compensation\n+\t\t#vmount\n \t\tvtol_att_control\n \tSYSTEMCMDS\n-\t\tbl_update\n+\t\t#bl_update\n \t\tdmesg\n \t\tdumpfile\n \t\tesc_calib"},{"sha":"64703e3984174eefd40dd2defcf0672ff05a3312","filename":"boards/holybro/kakutef7/default.cmake","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fholybro%2Fkakutef7%2Fdefault.cmake","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fholybro%2Fkakutef7%2Fdefault.cmake","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/boards%2Fholybro%2Fkakutef7%2Fdefault.cmake?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -7,6 +7,7 @@ px4_add_board(\n \tTOOLCHAIN arm-none-eabi\n \tARCHITECTURE cortex-m7\n \tROMFSROOT px4fmu_common\n+\tCONSTRAINED_FLASH\n \tSERIAL_PORTS\n \t\tTEL1:/dev/ttyS0 # UART1\n \t\tTEL2:/dev/ttyS1 # UART2"},{"sha":"779e072add2756923a4678e83bc3af0446b4f2e5","filename":"boards/px4/fmu-v5/stackcheck.cmake","status":"modified","additions":6,"deletions":6,"changes":12,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fpx4%2Ffmu-v5%2Fstackcheck.cmake","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fpx4%2Ffmu-v5%2Fstackcheck.cmake","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/boards%2Fpx4%2Ffmu-v5%2Fstackcheck.cmake?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -47,7 +47,7 @@ px4_add_board(\n \t\t#pca9685\n \t\t#power_monitor/ina226\n \t\t#protocol_splitter\n-\t\tpwm_input\n+\t\t#pwm_input\n \t\tpwm_out_sim\n \t\tpwm_out\n \t\tpx4io\n@@ -61,7 +61,7 @@ px4_add_board(\n \t\t#uavcan\n \tMODULES\n \t\tairspeed_selector\n-\t\tattitude_estimator_q\n+\t\t#attitude_estimator_q\n \t\tbattery_status\n \t\t#camera_feedback\n \t\tcommander\n@@ -84,11 +84,11 @@ px4_add_board(\n \t\t#micrortps_bridge\n \t\tnavigator\n \t\trc_update\n-\t\trover_pos_control\n+\t\t#rover_pos_control\n \t\tsensors\n-\t\tsih\n-\t\ttemperature_compensation\n-\t\tvmount\n+\t\t#sih\n+\t\t#temperature_compensation\n+\t\t#vmount\n \t\tvtol_att_control\n \tSYSTEMCMDS\n \t\tbl_update"},{"sha":"21956f2e9b7247cf90e46e7b0dffa877fe526bb9","filename":"boards/px4/io-v2/default.cmake","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fpx4%2Fio-v2%2Fdefault.cmake","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/boards%2Fpx4%2Fio-v2%2Fdefault.cmake","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/boards%2Fpx4%2Fio-v2%2Fdefault.cmake?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -4,6 +4,7 @@ px4_add_board(\n \tVENDOR px4\n \tMODEL io-v2\n \tTOOLCHAIN arm-none-eabi\n+\tCONSTRAINED_FLASH\n \tARCHITECTURE cortex-m3\n \tDRIVERS\n \tMODULES"},{"sha":"88e68f2fc11a6af8f9968e95444b8eb8051755bf","filename":"platforms/common/include/px4_platform_common/px4_work_queue/WorkQueueManager.hpp","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fcommon%2Finclude%2Fpx4_platform_common%2Fpx4_work_queue%2FWorkQueueManager.hpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fcommon%2Finclude%2Fpx4_platform_common%2Fpx4_work_queue%2FWorkQueueManager.hpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fcommon%2Finclude%2Fpx4_platform_common%2Fpx4_work_queue%2FWorkQueueManager.hpp?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -65,7 +65,7 @@ static constexpr wq_config_t I2C3{\"wq:I2C3\", 1472, -11};\n static constexpr wq_config_t I2C4{\"wq:I2C4\", 1472, -12};\n \n // PX4 att/pos controllers, highest priority after sensors.\n-static constexpr wq_config_t attitude_ctrl{\"wq:attitude_ctrl\", 1536, -13};\n+static constexpr wq_config_t attitude_ctrl{\"wq:attitude_ctrl\", 1600, -13};\n static constexpr wq_config_t navigation_and_controllers{\"wq:navigation_and_controllers\", 7200, -14};\n \n static constexpr wq_config_t hp_default{\"wq:hp_default\", 1900, -15};"},{"sha":"429c69d6d141386f8d64d1489f1a79560ac046b2","filename":"platforms/common/px4_work_queue/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fcommon%2Fpx4_work_queue%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fcommon%2Fpx4_work_queue%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fcommon%2Fpx4_work_queue%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -43,4 +43,5 @@ if(PX4_TESTING)\n \tadd_subdirectory(test)\n endif()\n \n+target_compile_options(px4_work_queue PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n target_link_libraries(px4_work_queue PRIVATE px4_platform)"},{"sha":"d60d9491067b1f8896351ca2f32bdbb583e5e089","filename":"platforms/nuttx/src/px4/common/CMakeLists.txt","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fcommon%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fcommon%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fcommon%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -32,7 +32,7 @@\n ############################################################################\n \n # skip for px4_layer support on an IO board\n-if (NOT ${PX4_BOARD} MATCHES \"px4_io\")\n+if(NOT PX4_BOARD MATCHES \"px4_io\")\n \n \tadd_library(px4_layer\n \t\tboard_crashdump.c"},{"sha":"5221ae896a639d3b95244b233928cb6a2b3207d2","filename":"platforms/nuttx/src/px4/stm/stm32_common/dshot/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fdshot%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fdshot%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fdshot%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -34,3 +34,4 @@\n px4_add_library(arch_dshot\n \tdshot.c\n )\n+target_compile_options(arch_dshot PRIVATE ${MAX_CUSTOM_OPT_LEVEL})"},{"sha":"82854e0def26e8ce9cc0de06822baf51879aa993","filename":"platforms/nuttx/src/px4/stm/stm32_common/hrt/CMakeLists.txt","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fhrt%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fhrt%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fhrt%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -34,5 +34,8 @@\n px4_add_library(arch_hrt\n \thrt.c\n )\n-target_compile_options(arch_hrt PRIVATE -Wno-cast-align) # TODO: fix and enable\n-\n+target_compile_options(arch_hrt\n+\tPRIVATE\n+\t\t${MAX_CUSTOM_OPT_LEVEL}\n+\t\t-Wno-cast-align # TODO: fix and enable\n+)"},{"sha":"6314afc0a52d08ccb903b058f53abe99b8b2910c","filename":"platforms/nuttx/src/px4/stm/stm32_common/io_pins/CMakeLists.txt","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fio_pins%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fio_pins%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fio_pins%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -32,8 +32,9 @@\n ############################################################################\n \n px4_add_library(arch_io_pins\n+\tinput_capture.c\n \tio_timer.c\n \tpwm_servo.c\n \tpwm_trigger.c\n-\tinput_capture.c\n )\n+target_compile_options(arch_io_pins PRIVATE ${MAX_CUSTOM_OPT_LEVEL})"},{"sha":"f20735002a3536c838d1311fe8b40f9550296b2c","filename":"platforms/nuttx/src/px4/stm/stm32_common/spi/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fspi%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fspi%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/platforms%2Fnuttx%2Fsrc%2Fpx4%2Fstm%2Fstm32_common%2Fspi%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -34,3 +34,4 @@\n px4_add_library(arch_spi\n \tspi.cpp\n )\n+target_compile_options(arch_spi PRIVATE ${MAX_CUSTOM_OPT_LEVEL})"},{"sha":"7fcc4759d9d64401772c43a36123518e13565a93","filename":"src/lib/drivers/accelerometer/CMakeLists.txt","status":"modified","additions":2,"deletions":6,"changes":8,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fdrivers%2Faccelerometer%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fdrivers%2Faccelerometer%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fdrivers%2Faccelerometer%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -35,9 +35,5 @@ px4_add_library(drivers_accelerometer\n \tPX4Accelerometer.cpp\n \tPX4Accelerometer.hpp\n )\n-target_link_libraries(drivers_accelerometer\n-\tPRIVATE\n-\t\tconversion\n-\t\tdrivers__device\n-\t\tmathlib\n-)\n+target_compile_options(drivers_accelerometer PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n+target_link_libraries(drivers_accelerometer PRIVATE conversion drivers__device)"},{"sha":"7a8c7edeb979596bb59f965a923d3b95bce0f61f","filename":"src/lib/drivers/gyroscope/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fdrivers%2Fgyroscope%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fdrivers%2Fgyroscope%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fdrivers%2Fgyroscope%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -35,4 +35,5 @@ px4_add_library(drivers_gyroscope\n \tPX4Gyroscope.cpp\n \tPX4Gyroscope.hpp\n )\n+target_compile_options(drivers_gyroscope PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n target_link_libraries(drivers_gyroscope PRIVATE conversion drivers__device)"},{"sha":"18c94811818f576382013fb8e6bbdc83de15a442","filename":"src/lib/perf/CMakeLists.txt","status":"modified","additions":2,"deletions":1,"changes":3,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fperf%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fperf%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fperf%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -32,4 +32,5 @@\n ############################################################################\n \n add_library(perf perf_counter.cpp)\n-add_dependencies(perf prebuild_targets)\n\\ No newline at end of file\n+add_dependencies(perf prebuild_targets)\n+target_compile_options(perf PRIVATE ${MAX_CUSTOM_OPT_LEVEL})"},{"sha":"63255b25f562d951ea65097febdc65b1c93e9496","filename":"src/lib/systemlib/CMakeLists.txt","status":"modified","additions":5,"deletions":0,"changes":5,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fsystemlib%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Flib%2Fsystemlib%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fsystemlib%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -33,13 +33,17 @@\n \n set(SRCS\n \tconversions.c\n+\tconversions.h\n \tcrc.c\n+\tcrc.h\n \tmavlink_log.cpp\n+\tmavlink_log.h\n )\n \n if(${PX4_PLATFORM} STREQUAL \"nuttx\")\n \tlist(APPEND SRCS\n \t\tcpuload.c\n+\t\tcpuload.h\n \t\tprint_load_nuttx.c\n \t\totp.c\n \t)\n@@ -50,3 +54,4 @@ else()\n endif()\n \n px4_add_library(systemlib ${SRCS})\n+target_compile_options(systemlib PRIVATE ${MAX_CUSTOM_OPT_LEVEL})"},{"sha":"4ff754e8e940241825f13d2e89197698d0bb8c57","filename":"src/modules/mc_att_control/AttitudeControl/CMakeLists.txt","status":"modified","additions":3,"deletions":4,"changes":7,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_att_control%2FAttitudeControl%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_att_control%2FAttitudeControl%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fmc_att_control%2FAttitudeControl%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -33,10 +33,9 @@\n \n px4_add_library(AttitudeControl\n \tAttitudeControl.cpp\n+\tAttitudeControl.hpp\n )\n-target_include_directories(AttitudeControl\n-\tPUBLIC\n-\t${CMAKE_CURRENT_SOURCE_DIR}\n-)\n+target_compile_options(AttitudeControl PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n+target_include_directories(AttitudeControl PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})\n \n px4_add_unit_gtest(SRC AttitudeControlTest.cpp LINKLIBS AttitudeControl)"},{"sha":"abd0f4ff9c33bc84aa252fc886c993e44f9c4b19","filename":"src/modules/mc_att_control/CMakeLists.txt","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_att_control%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_att_control%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fmc_att_control%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -37,10 +37,12 @@ px4_add_module(\n \tMODULE modules__mc_att_control\n \tMAIN mc_att_control\n \tCOMPILE_FLAGS\n+\t\t${MAX_CUSTOM_OPT_LEVEL}\n \tSRCS\n \t\tmc_att_control_main.cpp\n+\t\tmc_att_control.hpp\n \tDEPENDS\n-\t\tmathlib\n \t\tAttitudeControl\n+\t\tmathlib\n \t\tpx4_work_queue\n \t)"},{"sha":"758d56b7c88a5626347762ac3a79ea08a2223e8c","filename":"src/modules/mc_rate_control/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_rate_control%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_rate_control%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fmc_rate_control%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -37,6 +37,7 @@ px4_add_module(\n \tMODULE modules__mc_rate_control\n \tMAIN mc_rate_control\n \tCOMPILE_FLAGS\n+\t\t${MAX_CUSTOM_OPT_LEVEL}\n \tSRCS\n \t\tMulticopterRateControl.cpp\n \t\tMulticopterRateControl.hpp"},{"sha":"b536a7db092846708f02593ef963033475552984","filename":"src/modules/mc_rate_control/RateControl/CMakeLists.txt","status":"modified","additions":3,"deletions":5,"changes":8,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_rate_control%2FRateControl%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fmc_rate_control%2FRateControl%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fmc_rate_control%2FRateControl%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -33,12 +33,10 @@\n \n px4_add_library(RateControl\n \tRateControl.cpp\n+\tRateControl.hpp\n )\n-target_include_directories(RateControl\n-\tPUBLIC\n-\t${CMAKE_CURRENT_SOURCE_DIR}\n-)\n-\n+target_compile_options(RateControl PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n+target_include_directories(RateControl PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})\n target_link_libraries(RateControl PRIVATE mathlib)\n \n px4_add_unit_gtest(SRC RateControlTest.cpp LINKLIBS RateControl)"},{"sha":"35e53e6a968653a232dec2754d514bc09e2ce3d8","filename":"src/modules/sensors/sensor_corrections/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fsensor_corrections%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fsensor_corrections%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fsensors%2Fsensor_corrections%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -35,3 +35,4 @@ px4_add_library(sensor_corrections\n \tSensorCorrections.cpp\n \tSensorCorrections.hpp\n )\n+target_compile_options(sensor_corrections PRIVATE ${MAX_CUSTOM_OPT_LEVEL})"},{"sha":"3411a86cc0ebde7e248c793a2b3ec012fb649157","filename":"src/modules/sensors/vehicle_acceleration/CMakeLists.txt","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fvehicle_acceleration%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fvehicle_acceleration%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fsensors%2Fvehicle_acceleration%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -35,6 +35,9 @@ px4_add_library(vehicle_acceleration\n \tVehicleAcceleration.cpp\n \tVehicleAcceleration.hpp\n )\n+\n+target_compile_options(vehicle_acceleration PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n+\n target_link_libraries(vehicle_acceleration\n \tPRIVATE\n \t\tmathlib"},{"sha":"c784479263998e8f5fcec36ec71e17567f82ee7f","filename":"src/modules/sensors/vehicle_angular_velocity/CMakeLists.txt","status":"modified","additions":3,"deletions":0,"changes":3,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fvehicle_angular_velocity%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fvehicle_angular_velocity%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fsensors%2Fvehicle_angular_velocity%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -35,6 +35,9 @@ px4_add_library(vehicle_angular_velocity\n \tVehicleAngularVelocity.cpp\n \tVehicleAngularVelocity.hpp\n )\n+\n+target_compile_options(vehicle_angular_velocity PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n+\n target_link_libraries(vehicle_angular_velocity\n \tPRIVATE\n \t\tmathlib"},{"sha":"97b1006c572f9f401cd76297b10dff6ad02e3d34","filename":"src/modules/sensors/vehicle_imu/CMakeLists.txt","status":"modified","additions":1,"deletions":0,"changes":1,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fvehicle_imu%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2Fsensors%2Fvehicle_imu%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fsensors%2Fvehicle_imu%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -37,4 +37,5 @@ px4_add_library(vehicle_imu\n \tVehicleIMU.cpp\n \tVehicleIMU.hpp\n )\n+target_compile_options(vehicle_imu PRIVATE ${MAX_CUSTOM_OPT_LEVEL})\n target_link_libraries(vehicle_imu PRIVATE sensor_corrections px4_work_queue)"},{"sha":"48d0f94131574ea95dfdff2c6c362d8aa101a4da","filename":"src/modules/uORB/CMakeLists.txt","status":"modified","additions":3,"deletions":1,"changes":4,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2FuORB%2FCMakeLists.txt","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/31fe7af45453394feda9d253fb056be9ba7a1999/src%2Fmodules%2FuORB%2FCMakeLists.txt","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2FuORB%2FCMakeLists.txt?ref=31fe7af45453394feda9d253fb056be9ba7a1999","patch":"@@ -31,14 +31,16 @@\n #\n ############################################################################\n \n-if(NOT \"${PX4_BOARD}\" MATCHES \"px4_io\") # TODO: fix this hack (move uORB to platform layer)\n+if(NOT PX4_BOARD MATCHES \"px4_io\") # TODO: fix this hack (move uORB to platform layer)\n \n \t# this includes the generated topics directory\n \tinclude_directories(${CMAKE_CURRENT_BINARY_DIR})\n \n \tpx4_add_module(\n \t\tMODULE modules__uORB\n \t\tMAIN uorb\n+\t\tCOMPILE_FLAGS\n+\t\t\t${MAX_CUSTOM_OPT_LEVEL}\n \t\tSRCS\n \t\t\tORBSet.hpp\n \t\t\tPublication.hpp"}]}