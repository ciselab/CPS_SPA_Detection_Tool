{"sha":"f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b","node_id":"MDY6Q29tbWl0NTI5ODc5MDpmN2U2MjM0OWIzOWMxMTFiNjVjYzcwNjJhOWJmZTllZmMxZWJmZDhi","commit":{"author":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2019-10-20T15:44:54Z"},"committer":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2019-10-21T20:56:09Z"},"message":"px4_posix: increase posix stack overhead (mostly for ASan)\n\n - sync address sanitizer SITL tests","tree":{"sha":"dfc110868cabc1175d438d1cce1b30f82bb41fb5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/dfc110868cabc1175d438d1cce1b30f82bb41fb5"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b","html_url":"https://github.com/PX4/PX4-Autopilot/commit/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b/comments","author":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"committer":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"parents":[{"sha":"6a0f5249f825effc6a516596aea7ccc4b8c70cc2","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/6a0f5249f825effc6a516596aea7ccc4b8c70cc2","html_url":"https://github.com/PX4/PX4-Autopilot/commit/6a0f5249f825effc6a516596aea7ccc4b8c70cc2"}],"stats":{"total":31,"additions":23,"deletions":8},"files":[{"sha":"acd9f41ec88f10f63c4ba2b631edcb57cef349f4","filename":".ci/Jenkinsfile-SITL_tests_ASan","status":"modified","additions":22,"deletions":7,"changes":29,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b/.ci%2FJenkinsfile-SITL_tests_ASan","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b/.ci%2FJenkinsfile-SITL_tests_ASan","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/.ci%2FJenkinsfile-SITL_tests_ASan?ref=f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b","patch":"@@ -80,12 +80,26 @@ pipeline {\n               mission: \"VTOL_mission_1\",\n               vehicle: \"tailsitter\"\n             ],\n-            // [\n-            //   name: \"VTOL_tiltrotor\",\n-            //   test: \"mavros_posix_test_mission.test\",\n-            //   mission: \"VTOL_mission_1\",\n-            //   vehicle: \"tiltrotor\"\n-            // ],\n+            [\n+              name: \"VTOL_tiltrotor\",\n+              test: \"mavros_posix_test_mission.test\",\n+              mission: \"VTOL_mission_1\",\n+              vehicle: \"tiltrotor\"\n+            ],\n+            [\n+              name: \"MC_avoidance\",\n+              test: \"mavros_posix_test_avoidance.test\",\n+              mission: \"avoidance\",\n+              vehicle: \"iris_obs_avoid\",\n+              run_script: \"rostest_avoidance_run.sh\"\n+            ],\n+            [\n+              name: \"MC_safe_landing\",\n+              test: \"mavros_posix_test_safe_landing.test\",\n+              mission: \"MC_safe_landing\",\n+              vehicle: \"iris_obs_avoid\",\n+              run_script: \"rostest_avoidance_run.sh\"\n+            ],\n \n           ]\n \n@@ -119,6 +133,7 @@ def createTestNode(Map test_def) {\n       cleanWs()\n       docker.image(\"px4io/px4-dev-ros-kinetic:2019-10-04\").inside('-e HOME=${WORKSPACE}') {\n         stage(test_def.name) {\n+          def run_script = test_def.get('run_script', 'rostest_px4_run.sh')\n           def test_ok = true\n           sh('export')\n \n@@ -127,7 +142,7 @@ def createTestNode(Map test_def) {\n \n           // run test\n           try {\n-            sh('px4-px4_sitl_default*/px4/test/rostest_px4_run.sh ' + test_def.test + ' mission:=' + test_def.mission + ' vehicle:=' + test_def.vehicle)\n+            sh('px4-px4_sitl_default*/px4/test/' + run_script + ' ' + test_def.test + ' mission:=' + test_def.mission + ' vehicle:=' + test_def.vehicle)\n \n           } catch (exc) {\n             // save all test artifacts for debugging"},{"sha":"d8e346699e10836900c2bdfc5807de8760a82127","filename":"src/platforms/px4_posix.h","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b/src%2Fplatforms%2Fpx4_posix.h","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b/src%2Fplatforms%2Fpx4_posix.h","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fplatforms%2Fpx4_posix.h?ref=f7e62349b39c111b65cc7062a9bfe9efc1ebfd8b","patch":"@@ -81,7 +81,7 @@ typedef struct pollfd px4_pollfd_struct_t;\n \n #elif defined(__PX4_POSIX)\n \n-#define\t PX4_STACK_OVERHEAD\t8192\n+#define\t PX4_STACK_OVERHEAD\t(1024 * 11)\n \n /**\n  * Terminates the calling process immediately."}]}