{"sha":"e38560b928acac52c178b421e8fec46c4d47ddb7","node_id":"MDY6Q29tbWl0NTI5ODc5MDplMzg1NjBiOTI4YWNhYzUyYzE3OGI0MjFlOGZlYzQ2YzRkNDdkZGI3","commit":{"author":{"name":"Daniel Agar","email":"daniel@agar.ca","date":"2021-02-23T18:32:00Z"},"committer":{"name":"GitHub","email":"noreply@github.com","date":"2021-02-23T18:32:00Z"},"message":"sensor_calibration: increase threshold for updating calibration offsets or scale\n\n - this is to minimize needlessly writing negligible parameter changes and triggering unnecessary estimator bias resets","tree":{"sha":"2528610dda867ef260209be62f89d353409a88d7","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/2528610dda867ef260209be62f89d353409a88d7"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/e38560b928acac52c178b421e8fec46c4d47ddb7","comment_count":0,"verification":{"verified":true,"reason":"valid","signature":"-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgNUogCRBK7hj4Ov3rIwAAdHIIAD6deb9VVvWgDXFA9hSUTjxv\nAeZyUNxoceCIqC3s5VC/wSqA64SruqGLyi3BdallvApgsE6MQq4eeTFb5FSPELWY\nTgeoxWQXZP6UtNJViME3fPGR5L6bqsG/ch1YQiP8X0y9YfkPKyclBm+5j3p+qf9p\nUhdtwdqUue4L38joB9tt4lZsM78jvHbPgAvLglCJQJyBz+54yVLG4Yg/2StDAwpr\ndmMnbAmIbwblwhiPHedlufVdqAKL+giBYxid3MNELQBmHE07SKF0TBfWl26ckTO8\n7uwufE4vxyWs5flnjOKKtVSGVVeKIWh9sffgxP+1k5b9WzpZ5V8DHBcGYgT766g=\n=1GeH\n-----END PGP SIGNATURE-----\n","payload":"tree 2528610dda867ef260209be62f89d353409a88d7\nparent d65d06f82dc91ecf2b948c10027f24e2caa788de\nauthor Daniel Agar <daniel@agar.ca> 1614105120 -0500\ncommitter GitHub <noreply@github.com> 1614105120 -0500\n\nsensor_calibration: increase threshold for updating calibration offsets or scale\n\n - this is to minimize needlessly writing negligible parameter changes and triggering unnecessary estimator bias resets"}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/e38560b928acac52c178b421e8fec46c4d47ddb7","html_url":"https://github.com/PX4/PX4-Autopilot/commit/e38560b928acac52c178b421e8fec46c4d47ddb7","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/e38560b928acac52c178b421e8fec46c4d47ddb7/comments","author":{"login":"dagar","id":84712,"node_id":"MDQ6VXNlcjg0NzEy","avatar_url":"https://avatars.githubusercontent.com/u/84712?v=4","gravatar_id":"","url":"https://api.github.com/users/dagar","html_url":"https://github.com/dagar","followers_url":"https://api.github.com/users/dagar/followers","following_url":"https://api.github.com/users/dagar/following{/other_user}","gists_url":"https://api.github.com/users/dagar/gists{/gist_id}","starred_url":"https://api.github.com/users/dagar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dagar/subscriptions","organizations_url":"https://api.github.com/users/dagar/orgs","repos_url":"https://api.github.com/users/dagar/repos","events_url":"https://api.github.com/users/dagar/events{/privacy}","received_events_url":"https://api.github.com/users/dagar/received_events","type":"User","site_admin":false},"committer":{"login":"web-flow","id":19864447,"node_id":"MDQ6VXNlcjE5ODY0NDQ3","avatar_url":"https://avatars.githubusercontent.com/u/19864447?v=4","gravatar_id":"","url":"https://api.github.com/users/web-flow","html_url":"https://github.com/web-flow","followers_url":"https://api.github.com/users/web-flow/followers","following_url":"https://api.github.com/users/web-flow/following{/other_user}","gists_url":"https://api.github.com/users/web-flow/gists{/gist_id}","starred_url":"https://api.github.com/users/web-flow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/web-flow/subscriptions","organizations_url":"https://api.github.com/users/web-flow/orgs","repos_url":"https://api.github.com/users/web-flow/repos","events_url":"https://api.github.com/users/web-flow/events{/privacy}","received_events_url":"https://api.github.com/users/web-flow/received_events","type":"User","site_admin":false},"parents":[{"sha":"d65d06f82dc91ecf2b948c10027f24e2caa788de","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/d65d06f82dc91ecf2b948c10027f24e2caa788de","html_url":"https://github.com/PX4/PX4-Autopilot/commit/d65d06f82dc91ecf2b948c10027f24e2caa788de"}],"stats":{"total":12,"additions":6,"deletions":6},"files":[{"sha":"107ab513071905bcab854bd5e4ba7c55de78d6f7","filename":"src/lib/sensor_calibration/Accelerometer.cpp","status":"modified","additions":2,"deletions":2,"changes":4,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/e38560b928acac52c178b421e8fec46c4d47ddb7/src%2Flib%2Fsensor_calibration%2FAccelerometer.cpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/e38560b928acac52c178b421e8fec46c4d47ddb7/src%2Flib%2Fsensor_calibration%2FAccelerometer.cpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fsensor_calibration%2FAccelerometer.cpp?ref=e38560b928acac52c178b421e8fec46c4d47ddb7","patch":"@@ -125,7 +125,7 @@ void Accelerometer::SensorCorrectionsUpdate(bool force)\n \n bool Accelerometer::set_offset(const Vector3f &offset)\n {\n-\tif (Vector3f(_offset - offset).longerThan(0.001f)) {\n+\tif (Vector3f(_offset - offset).longerThan(0.01f)) {\n \t\t_offset = offset;\n \n \t\t_calibration_count++;\n@@ -137,7 +137,7 @@ bool Accelerometer::set_offset(const Vector3f &offset)\n \n bool Accelerometer::set_scale(const Vector3f &scale)\n {\n-\tif (Vector3f(_scale - scale).longerThan(0.001f)) {\n+\tif (Vector3f(_scale - scale).longerThan(0.01f)) {\n \t\t_scale = scale;\n \n \t\t_calibration_count++;"},{"sha":"a1326101eb3146808d41ae3ee1cd844154c94504","filename":"src/lib/sensor_calibration/Gyroscope.cpp","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/e38560b928acac52c178b421e8fec46c4d47ddb7/src%2Flib%2Fsensor_calibration%2FGyroscope.cpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/e38560b928acac52c178b421e8fec46c4d47ddb7/src%2Flib%2Fsensor_calibration%2FGyroscope.cpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fsensor_calibration%2FGyroscope.cpp?ref=e38560b928acac52c178b421e8fec46c4d47ddb7","patch":"@@ -125,7 +125,7 @@ void Gyroscope::SensorCorrectionsUpdate(bool force)\n \n bool Gyroscope::set_offset(const Vector3f &offset)\n {\n-\tif (Vector3f(_offset - offset).longerThan(0.001f)) {\n+\tif (Vector3f(_offset - offset).longerThan(0.01f)) {\n \t\t_offset = offset;\n \n \t\t_calibration_count++;"},{"sha":"4c2372190234a1dc5fbf99baaf9dfe755bd0d02f","filename":"src/lib/sensor_calibration/Magnetometer.cpp","status":"modified","additions":3,"deletions":3,"changes":6,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/e38560b928acac52c178b421e8fec46c4d47ddb7/src%2Flib%2Fsensor_calibration%2FMagnetometer.cpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/e38560b928acac52c178b421e8fec46c4d47ddb7/src%2Flib%2Fsensor_calibration%2FMagnetometer.cpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Flib%2Fsensor_calibration%2FMagnetometer.cpp?ref=e38560b928acac52c178b421e8fec46c4d47ddb7","patch":"@@ -85,7 +85,7 @@ void Magnetometer::set_external(bool external)\n \n bool Magnetometer::set_offset(const Vector3f &offset)\n {\n-\tif (Vector3f(_offset - offset).longerThan(0.001f)) {\n+\tif (Vector3f(_offset - offset).longerThan(0.01f)) {\n \t\t_offset = offset;\n \n \t\t_calibration_count++;\n@@ -97,7 +97,7 @@ bool Magnetometer::set_offset(const Vector3f &offset)\n \n bool Magnetometer::set_scale(const Vector3f &scale)\n {\n-\tif (Vector3f(_scale.diag() - scale).longerThan(0.001f)) {\n+\tif (Vector3f(_scale.diag() - scale).longerThan(0.01f)) {\n \t\t_scale(0, 0) = scale(0);\n \t\t_scale(1, 1) = scale(1);\n \t\t_scale(2, 2) = scale(2);\n@@ -111,7 +111,7 @@ bool Magnetometer::set_scale(const Vector3f &scale)\n \n bool Magnetometer::set_offdiagonal(const Vector3f &offdiagonal)\n {\n-\tif (Vector3f(Vector3f{_scale(0, 1), _scale(0, 2), _scale(1, 2)} - offdiagonal).longerThan(0.001f)) {\n+\tif (Vector3f(Vector3f{_scale(0, 1), _scale(0, 2), _scale(1, 2)} - offdiagonal).longerThan(0.01f)) {\n \t\t_scale(0, 1) = offdiagonal(0);\n \t\t_scale(1, 0) = offdiagonal(0);\n "}]}