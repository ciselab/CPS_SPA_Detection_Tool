{"sha":"be85f895a0fbb90aa3b0628c8173574375ac1c07","node_id":"MDY6Q29tbWl0NTI5ODc5MDpiZTg1Zjg5NWEwZmJiOTBhYTNiMDYyOGM4MTczNTc0Mzc1YWMxYzA3","commit":{"author":{"name":"px4dev","email":"px4@purgatory.org","date":"2012-08-23T00:06:58Z"},"committer":{"name":"px4dev","email":"px4@purgatory.org","date":"2012-08-23T00:06:58Z"},"message":"Use a much shorter timeout for normal communication, and stretch it only when we are waiting for erase.","tree":{"sha":"e7485e1a6f068fe46b2a0b9de2faadcd92dad352","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/e7485e1a6f068fe46b2a0b9de2faadcd92dad352"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/be85f895a0fbb90aa3b0628c8173574375ac1c07","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/be85f895a0fbb90aa3b0628c8173574375ac1c07","html_url":"https://github.com/PX4/PX4-Autopilot/commit/be85f895a0fbb90aa3b0628c8173574375ac1c07","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/be85f895a0fbb90aa3b0628c8173574375ac1c07/comments","author":{"login":"px4dev","id":2095699,"node_id":"MDQ6VXNlcjIwOTU2OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2095699?v=4","gravatar_id":"","url":"https://api.github.com/users/px4dev","html_url":"https://github.com/px4dev","followers_url":"https://api.github.com/users/px4dev/followers","following_url":"https://api.github.com/users/px4dev/following{/other_user}","gists_url":"https://api.github.com/users/px4dev/gists{/gist_id}","starred_url":"https://api.github.com/users/px4dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/px4dev/subscriptions","organizations_url":"https://api.github.com/users/px4dev/orgs","repos_url":"https://api.github.com/users/px4dev/repos","events_url":"https://api.github.com/users/px4dev/events{/privacy}","received_events_url":"https://api.github.com/users/px4dev/received_events","type":"User","site_admin":false},"committer":{"login":"px4dev","id":2095699,"node_id":"MDQ6VXNlcjIwOTU2OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2095699?v=4","gravatar_id":"","url":"https://api.github.com/users/px4dev","html_url":"https://github.com/px4dev","followers_url":"https://api.github.com/users/px4dev/followers","following_url":"https://api.github.com/users/px4dev/following{/other_user}","gists_url":"https://api.github.com/users/px4dev/gists{/gist_id}","starred_url":"https://api.github.com/users/px4dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/px4dev/subscriptions","organizations_url":"https://api.github.com/users/px4dev/orgs","repos_url":"https://api.github.com/users/px4dev/repos","events_url":"https://api.github.com/users/px4dev/events{/privacy}","received_events_url":"https://api.github.com/users/px4dev/received_events","type":"User","site_admin":false},"parents":[{"sha":"e0a9024b641339156e564644a2c23a6bf8176820","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/e0a9024b641339156e564644a2c23a6bf8176820","html_url":"https://github.com/PX4/PX4-Autopilot/commit/e0a9024b641339156e564644a2c23a6bf8176820"}],"stats":{"total":8,"additions":6,"deletions":2},"files":[{"sha":"1a0d7bd45b0b1055f6b6242c10df21c772861dbd","filename":"Tools/px_uploader.py","status":"modified","additions":6,"deletions":2,"changes":8,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/be85f895a0fbb90aa3b0628c8173574375ac1c07/Tools%2Fpx_uploader.py","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/be85f895a0fbb90aa3b0628c8173574375ac1c07/Tools%2Fpx_uploader.py","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/Tools%2Fpx_uploader.py?ref=be85f895a0fbb90aa3b0628c8173574375ac1c07","patch":"@@ -111,8 +111,8 @@ class uploader(object):\n \tREAD_MULTI_MAX\t= 60\t\t# protocol max is 255, something overflows with >= 64\n \n \tdef __init__(self, portname, baudrate):\n-\t\t# open the port\n-\t\tself.port = serial.Serial(portname, baudrate, timeout=10)\n+\t\t# open the port, keep the default timeout short so we can poll quickly\n+\t\tself.port = serial.Serial(portname, baudrate, timeout=0.25)\n \n \tdef close(self):\n \t\tif self.port is not None:\n@@ -171,7 +171,11 @@ def __getInfo(self, param):\n \tdef __erase(self):\n \t\tself.__send(uploader.CHIP_ERASE \n \t\t\t\t+ uploader.EOC)\n+\t\t# erase is very slow, give it 10s\n+\t\told_timeout = self.port.timeout\n+\t\tself.port.timeout = 10\n \t\tself.__getSync()\n+\t\tself.port.timeout = old_timeout\n \n \t# send a PROG_MULTI command to write a collection of bytes\n \tdef __program_multi(self, data):"}]}