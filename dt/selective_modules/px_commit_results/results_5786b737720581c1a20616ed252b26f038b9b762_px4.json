{"sha":"5786b737720581c1a20616ed252b26f038b9b762","node_id":"MDY6Q29tbWl0NTI5ODc5MDo1Nzg2YjczNzcyMDU4MWMxYTIwNjE2ZWQyNTJiMjZmMDM4YjliNzYy","commit":{"author":{"name":"Lorenz Meier","email":"lorenz@px4.io","date":"2016-08-15T11:06:24Z"},"committer":{"name":"Lorenz Meier","email":"lm@inf.ethz.ch","date":"2016-08-15T17:53:21Z"},"message":"Tweak startup order for memory","tree":{"sha":"273585f3b7028cc839498d90fee76eb4b63101d4","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/273585f3b7028cc839498d90fee76eb4b63101d4"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/5786b737720581c1a20616ed252b26f038b9b762","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/5786b737720581c1a20616ed252b26f038b9b762","html_url":"https://github.com/PX4/PX4-Autopilot/commit/5786b737720581c1a20616ed252b26f038b9b762","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/5786b737720581c1a20616ed252b26f038b9b762/comments","author":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"committer":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"parents":[{"sha":"a130b6a65c8bd36b035f2da8ead9e5fc5c369b9c","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/a130b6a65c8bd36b035f2da8ead9e5fc5c369b9c","html_url":"https://github.com/PX4/PX4-Autopilot/commit/a130b6a65c8bd36b035f2da8ead9e5fc5c369b9c"}],"stats":{"total":75,"additions":24,"deletions":51},"files":[{"sha":"e979a4edf8c0bbd1c48ba62c178e04a10add06bb","filename":"ROMFS/tap_common/init.d/6001_hexa_x","status":"modified","additions":7,"deletions":1,"changes":8,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2F6001_hexa_x","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2F6001_hexa_x","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/ROMFS%2Ftap_common%2Finit.d%2F6001_hexa_x?ref=5786b737720581c1a20616ed252b26f038b9b762","patch":"@@ -13,7 +13,13 @@\n \n sh /etc/init.d/rc.mc_defaults\n \n-tap_esc start -d /dev/ttyS4 -n 6\n+param set MAV_TYPE 13\n+param set MC_YAWRATE_P 0.12\n+param set CAL_MAG0_ROT 6\n+\n+if tap_esc start -d /dev/ttyS4 -n 6\n+then\n+fi\n set OUTPUT_MODE tap_esc\n \n set MIXER hexa_x"},{"sha":"ebe7d8bed880f30acafcb742c71cc36e6d021453","filename":"ROMFS/tap_common/init.d/rc.mc_defaults","status":"modified","additions":8,"deletions":19,"changes":27,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2Frc.mc_defaults","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2Frc.mc_defaults","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/ROMFS%2Ftap_common%2Finit.d%2Frc.mc_defaults?ref=5786b737720581c1a20616ed252b26f038b9b762","patch":"@@ -9,16 +9,19 @@ then\n \tparam set PE_POSNE_NOISE 0.5\n \tparam set PE_POSD_NOISE 1.25\n \n-\tparam set NAV_ACC_RAD 2.0\n-\tparam set RTL_RETURN_ALT 30.0\n-\tparam set RTL_DESCEND_ALT 10.0\n \tparam set PWM_DISARMED 900\n \tparam set PWM_MIN 1075\n \tparam set PWM_MAX 1950\n-\n-\tparam set RTL_LAND_DELAY 0\n fi\n \n+param set NAV_ACC_RAD 2.0\n+param set MIS_TAKEOFF_ALT 2.5\n+param set RTL_RETURN_ALT 30.0\n+param set RTL_DESCEND_ALT 10.0\n+param set RTL_LAND_DELAY 0\n+param set MPC_THR_MIN 0.10\n+param set MPC_MANTHR_MIN 0.04\n+\n # set environment variables (!= parameters)\n set PWM_RATE 400\n # tell the mixer to use parameters for these instead\n@@ -33,17 +36,3 @@ set PWM_AUX_OUT 1234\n set PWM_AUX_DISARMED 1500\n set PWM_AUX_MIN 1000\n set PWM_AUX_MAX 2000\n-\n-# Transitional support: ensure suitable PWM min/max param values\n-if param compare PWM_MIN 1000\n-then\n-\tparam set PWM_MIN 1075\n-fi\n-if param compare PWM_MAX 2000\n-then\n-\tparam set PWM_MAX 1950\n-fi\n-if param compare PWM_DISARMED 0\n-then\n-\tparam set PWM_DISARMED 900\n-fi"},{"sha":"391199627a38147615528c072acdcd34ab568b90","filename":"ROMFS/tap_common/init.d/rc.sensors","status":"modified","additions":3,"deletions":7,"changes":10,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2Frc.sensors","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2Frc.sensors","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/ROMFS%2Ftap_common%2Finit.d%2Frc.sensors?ref=5786b737720581c1a20616ed252b26f038b9b762","patch":"@@ -16,17 +16,13 @@ if hmc5883 -C -T -X start\n then\n fi\n \n-# Internal I2C bus Rotation TBD\n+# Internal I2C bus\n if mpu6000 -I -T 6000 start\n then\n fi\n \n-if meas_airspeed start\n-then\n-fi\n-\n-# Wait 20 ms for sensors (because we need to wait for the HRT and work queue callbacks to fire)\n-usleep 20000\n+# Wait 50 ms for sensors (because we need to wait for the HRT and work queue callbacks to fire)\n+usleep 50000\n if sensors start\n then\n fi"},{"sha":"6e30775b74ce4080671f4410fb841345b8b618d1","filename":"ROMFS/tap_common/init.d/rcS","status":"modified","additions":6,"deletions":24,"changes":30,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2FrcS","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/5786b737720581c1a20616ed252b26f038b9b762/ROMFS%2Ftap_common%2Finit.d%2FrcS","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/ROMFS%2Ftap_common%2Finit.d%2FrcS?ref=5786b737720581c1a20616ed252b26f038b9b762","patch":"@@ -21,8 +21,6 @@ sercon\n set TUNE_ERR ML<<CP4CP4CP4CP4CP4\n set LOG_FILE /fs/microsd/bootlog.txt\n \n-tone_alarm start\n-\n #\n # Try to mount the microSD card.\n #\n@@ -68,6 +66,8 @@ else\n \tfi\n fi\n \n+tone_alarm start\n+\n #\n # Start system state indicator\n #\n@@ -158,7 +158,10 @@ commander start\n load_mon start\n \n # Start MAVLink on the gimbal port\n-mavlink start -r 1200 -d /dev/ttyS1\n+#mavlink start -r 1200 -d /dev/ttyS1\n+\n+# Start MAVLink on USB, developers can use the MAVLink shell\n+mavlink start -r 60000 -d /dev/ttyACM0 -m config\n \n #\n # Logging\n@@ -336,30 +339,9 @@ if navigator start\n then\n fi\n \n-#\n-# Generic setup (autostart ID not found)\n-#\n-if [ $VEHICLE_TYPE == none ]\n-then\n-\techo \"WARN  [init] No autostart ID found\"\n-fi\n-\n-# Start any custom addons\n-set FEXTRAS /fs/microsd/etc/extras.txt\n-if [ -f $FEXTRAS ]\n-then\n-\techo \"INFO  [init] Addons script: $FEXTRAS\"\n-\tsh $FEXTRAS\n-fi\n-unset FEXTRAS\n-\n # There is no further script processing, so we can free some RAM\n # XXX potentially unset all script variables.\n unset TUNE_ERR\n \n-# Start MAVLink on USB, developers can use the MAVLink shell\n-mavlink start -r 800000 -d /dev/ttyACM0 -m config -x\n-\n # Boot is complete, inform MAVLink app(s) that the system is now fully up and running\n mavlink boot_complete\n-echo \"[boot complete]\""}]}