{"sha":"b79553862e220a20db129298f85511697f343306","node_id":"MDY6Q29tbWl0NTI5ODc5MDpiNzk1NTM4NjJlMjIwYTIwZGIxMjkyOThmODU1MTE2OTdmMzQzMzA2","commit":{"author":{"name":"Julian Oes","email":"julian@oes.ch","date":"2021-02-12T10:39:56Z"},"committer":{"name":"Lorenz Meier","email":"lorenz@px4.io","date":"2021-02-16T16:07:21Z"},"message":"mavsdk_tests: remove timeout for mission upload\n\nJust use what is MAVSDK internal.","tree":{"sha":"71c1405f2f5d3a306ecd52896156a94290adddc8","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/71c1405f2f5d3a306ecd52896156a94290adddc8"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/b79553862e220a20db129298f85511697f343306","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/b79553862e220a20db129298f85511697f343306","html_url":"https://github.com/PX4/PX4-Autopilot/commit/b79553862e220a20db129298f85511697f343306","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/b79553862e220a20db129298f85511697f343306/comments","author":{"login":"julianoes","id":1419688,"node_id":"MDQ6VXNlcjE0MTk2ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1419688?v=4","gravatar_id":"","url":"https://api.github.com/users/julianoes","html_url":"https://github.com/julianoes","followers_url":"https://api.github.com/users/julianoes/followers","following_url":"https://api.github.com/users/julianoes/following{/other_user}","gists_url":"https://api.github.com/users/julianoes/gists{/gist_id}","starred_url":"https://api.github.com/users/julianoes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julianoes/subscriptions","organizations_url":"https://api.github.com/users/julianoes/orgs","repos_url":"https://api.github.com/users/julianoes/repos","events_url":"https://api.github.com/users/julianoes/events{/privacy}","received_events_url":"https://api.github.com/users/julianoes/received_events","type":"User","site_admin":false},"committer":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"parents":[{"sha":"cf2ffb10869b2fa666ea5d53122a69ffecaa90d5","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/cf2ffb10869b2fa666ea5d53122a69ffecaa90d5","html_url":"https://github.com/PX4/PX4-Autopilot/commit/cf2ffb10869b2fa666ea5d53122a69ffecaa90d5"}],"stats":{"total":20,"additions":2,"deletions":18},"files":[{"sha":"0e42a4a837710e3e33858cdf6a733000ec50cc2e","filename":"test/mavsdk_tests/autopilot_tester.cpp","status":"modified","additions":2,"deletions":18,"changes":20,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/b79553862e220a20db129298f85511697f343306/test%2Fmavsdk_tests%2Fautopilot_tester.cpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/b79553862e220a20db129298f85511697f343306/test%2Fmavsdk_tests%2Fautopilot_tester.cpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/test%2Fmavsdk_tests%2Fautopilot_tester.cpp?ref=b79553862e220a20db129298f85511697f343306","patch":"@@ -179,15 +179,7 @@ void AutopilotTester::prepare_square_mission(MissionOptions mission_options)\n \n \t_mission->set_return_to_launch_after_mission(mission_options.rtl_at_end);\n \n-\tstd::promise<void> prom;\n-\tauto fut = prom.get_future();\n-\n-\t_mission->upload_mission_async(mission_plan, [&prom](Mission::Result result) {\n-\t\tREQUIRE(Mission::Result::Success == result);\n-\t\tprom.set_value();\n-\t});\n-\n-\tREQUIRE(fut.wait_for(std::chrono::seconds(2)) == std::future_status::ready);\n+\tREQUIRE(_mission->upload_mission(mission_plan) == Mission::Result::Success);\n }\n \n void AutopilotTester::prepare_straight_mission(MissionOptions mission_options)\n@@ -203,15 +195,7 @@ void AutopilotTester::prepare_straight_mission(MissionOptions mission_options)\n \n \t_mission->set_return_to_launch_after_mission(mission_options.rtl_at_end);\n \n-\tstd::promise<void> prom;\n-\tauto fut = prom.get_future();\n-\n-\t_mission->upload_mission_async(mission_plan, [&prom](Mission::Result result) {\n-\t\tREQUIRE(Mission::Result::Success == result);\n-\t\tprom.set_value();\n-\t});\n-\n-\tREQUIRE(fut.wait_for(std::chrono::seconds(2)) == std::future_status::ready);\n+\tREQUIRE(_mission->upload_mission(mission_plan) == Mission::Result::Success);\n }\n \n void AutopilotTester::execute_mission()"}]}