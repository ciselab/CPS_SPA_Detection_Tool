{"sha":"76c479170a3fdb61e21b302f20e0d3f2fa08e01e","node_id":"MDY6Q29tbWl0NTI5ODc5MDo3NmM0NzkxNzBhM2ZkYjYxZTIxYjMwMmYyMGUwZDNmMmZhMDhlMDFl","commit":{"author":{"name":"davidvor","email":"davidvorsin@gmail.com","date":"2015-09-03T14:19:40Z"},"committer":{"name":"tumbili","email":"bapstr@ethz.ch","date":"2015-11-25T12:28:22Z"},"message":"add transition back throttle value and angular rate","tree":{"sha":"4fffa54ab7828d392d4cd419db9b1805bad930a7","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/4fffa54ab7828d392d4cd419db9b1805bad930a7"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/76c479170a3fdb61e21b302f20e0d3f2fa08e01e","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/76c479170a3fdb61e21b302f20e0d3f2fa08e01e","html_url":"https://github.com/PX4/PX4-Autopilot/commit/76c479170a3fdb61e21b302f20e0d3f2fa08e01e","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/76c479170a3fdb61e21b302f20e0d3f2fa08e01e/comments","author":{"login":"davidvor","id":12406773,"node_id":"MDQ6VXNlcjEyNDA2Nzcz","avatar_url":"https://avatars.githubusercontent.com/u/12406773?v=4","gravatar_id":"","url":"https://api.github.com/users/davidvor","html_url":"https://github.com/davidvor","followers_url":"https://api.github.com/users/davidvor/followers","following_url":"https://api.github.com/users/davidvor/following{/other_user}","gists_url":"https://api.github.com/users/davidvor/gists{/gist_id}","starred_url":"https://api.github.com/users/davidvor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davidvor/subscriptions","organizations_url":"https://api.github.com/users/davidvor/orgs","repos_url":"https://api.github.com/users/davidvor/repos","events_url":"https://api.github.com/users/davidvor/events{/privacy}","received_events_url":"https://api.github.com/users/davidvor/received_events","type":"User","site_admin":false},"committer":{"login":"RomanBapst","id":7610489,"node_id":"MDQ6VXNlcjc2MTA0ODk=","avatar_url":"https://avatars.githubusercontent.com/u/7610489?v=4","gravatar_id":"","url":"https://api.github.com/users/RomanBapst","html_url":"https://github.com/RomanBapst","followers_url":"https://api.github.com/users/RomanBapst/followers","following_url":"https://api.github.com/users/RomanBapst/following{/other_user}","gists_url":"https://api.github.com/users/RomanBapst/gists{/gist_id}","starred_url":"https://api.github.com/users/RomanBapst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RomanBapst/subscriptions","organizations_url":"https://api.github.com/users/RomanBapst/orgs","repos_url":"https://api.github.com/users/RomanBapst/repos","events_url":"https://api.github.com/users/RomanBapst/events{/privacy}","received_events_url":"https://api.github.com/users/RomanBapst/received_events","type":"User","site_admin":false},"parents":[{"sha":"19b960648664d29147632052180e91f8b31863d8","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/19b960648664d29147632052180e91f8b31863d8","html_url":"https://github.com/PX4/PX4-Autopilot/commit/19b960648664d29147632052180e91f8b31863d8"}],"stats":{"total":7,"additions":5,"deletions":2},"files":[{"sha":"d2ef6b3db28491af81962d79e86180b963751560","filename":"src/modules/vtol_att_control/tailsitter.cpp","status":"modified","additions":5,"deletions":2,"changes":7,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/76c479170a3fdb61e21b302f20e0d3f2fa08e01e/src%2Fmodules%2Fvtol_att_control%2Ftailsitter.cpp","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/76c479170a3fdb61e21b302f20e0d3f2fa08e01e/src%2Fmodules%2Fvtol_att_control%2Ftailsitter.cpp","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fmodules%2Fvtol_att_control%2Ftailsitter.cpp?ref=76c479170a3fdb61e21b302f20e0d3f2fa08e01e","patch":"@@ -46,7 +46,7 @@\n  #define THROTTLE_TRANSITION_MAX 0.25f\t// maximum added thrust above last value in transition\n  #define PITCH_TRANSITION_FRONT_P1 -1.1f\t// pitch angle to switch to TRANSITION_P2\n  #define PITCH_TRANSITION_FRONT_P2 -1.2f\t// pitch angle to switch to FW\n- #define PITCH_TRANSITION_BACK -0.6f\t// pitch angle to switch to MC\n+ #define PITCH_TRANSITION_BACK -0.25f\t// pitch angle to switch to MC\n \n Tailsitter::Tailsitter (VtolAttitudeControl *attc) :\n VtolType(attc),\n@@ -316,8 +316,11 @@ void Tailsitter::update_transition_state()\n \t\t}\n \n \t\t/** create time dependant pitch angle set point stating at -pi/2 + 0.2 rad overlap over the switch value*/\t\t\n-\t\t_v_att_sp->pitch_body = -1.57f + _pitch_transition_start + fabsf(PITCH_TRANSITION_BACK - _pitch_transition_start) * (float)hrt_elapsed_time(&_vtol_schedule.transition_start)/(_params_tailsitter.back_trans_dur * 1000000.0f);\t\n+\t\t_v_att_sp->pitch_body = -1.57f + _pitch_transition_start + fabsf(PITCH_TRANSITION_BACK + 1.57f ) * (float)hrt_elapsed_time(&_vtol_schedule.transition_start)/(_params_tailsitter.back_trans_dur * 1000000.0f);\t\n \t\t_v_att_sp->pitch_body = math::constrain(_v_att_sp->pitch_body , -2.0f , PITCH_TRANSITION_BACK+0.2f);\n+\n+\n+\t\t_v_att_sp->thrust = _throttle_transition*0.9f;\n \t\t\t\n \t\t/** keep yaw disabled */\n \t\t_mc_yaw_weight = 0.0f;"}]}