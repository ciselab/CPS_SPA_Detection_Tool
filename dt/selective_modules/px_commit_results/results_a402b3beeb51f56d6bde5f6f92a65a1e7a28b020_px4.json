{"sha":"a402b3beeb51f56d6bde5f6f92a65a1e7a28b020","node_id":"MDY6Q29tbWl0NTI5ODc5MDphNDAyYjNiZWViNTFmNTZkNmJkZTVmNmY5MmE2NWExZTdhMjhiMDIw","commit":{"author":{"name":"Mark Whitehorn","email":"kd0aij@gmail.com","date":"2016-01-22T21:42:39Z"},"committer":{"name":"Lorenz Meier","email":"lm@inf.ethz.ch","date":"2016-01-24T10:22:18Z"},"message":"change frsky_telemetry default port to USART8 for pixracer\nadd a 50msec timeout to poll calls in sPort_telemetry to prevent hangs","tree":{"sha":"f4ed76749189e9fc3d92e00c53ee84026f3f1112","url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/trees/f4ed76749189e9fc3d92e00c53ee84026f3f1112"},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/git/commits/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020","comment_count":0,"verification":{"verified":false,"reason":"unsigned","signature":null,"payload":null}},"url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020","html_url":"https://github.com/PX4/PX4-Autopilot/commit/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020","comments_url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020/comments","author":{"login":"kd0aij","id":2300221,"node_id":"MDQ6VXNlcjIzMDAyMjE=","avatar_url":"https://avatars.githubusercontent.com/u/2300221?v=4","gravatar_id":"","url":"https://api.github.com/users/kd0aij","html_url":"https://github.com/kd0aij","followers_url":"https://api.github.com/users/kd0aij/followers","following_url":"https://api.github.com/users/kd0aij/following{/other_user}","gists_url":"https://api.github.com/users/kd0aij/gists{/gist_id}","starred_url":"https://api.github.com/users/kd0aij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kd0aij/subscriptions","organizations_url":"https://api.github.com/users/kd0aij/orgs","repos_url":"https://api.github.com/users/kd0aij/repos","events_url":"https://api.github.com/users/kd0aij/events{/privacy}","received_events_url":"https://api.github.com/users/kd0aij/received_events","type":"User","site_admin":false},"committer":{"login":"LorenzMeier","id":1208119,"node_id":"MDQ6VXNlcjEyMDgxMTk=","avatar_url":"https://avatars.githubusercontent.com/u/1208119?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzMeier","html_url":"https://github.com/LorenzMeier","followers_url":"https://api.github.com/users/LorenzMeier/followers","following_url":"https://api.github.com/users/LorenzMeier/following{/other_user}","gists_url":"https://api.github.com/users/LorenzMeier/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzMeier/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzMeier/subscriptions","organizations_url":"https://api.github.com/users/LorenzMeier/orgs","repos_url":"https://api.github.com/users/LorenzMeier/repos","events_url":"https://api.github.com/users/LorenzMeier/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzMeier/received_events","type":"User","site_admin":false},"parents":[{"sha":"8d089d95d4d4e7c51a352b9f7fe981f332a120ad","url":"https://api.github.com/repos/PX4/PX4-Autopilot/commits/8d089d95d4d4e7c51a352b9f7fe981f332a120ad","html_url":"https://github.com/PX4/PX4-Autopilot/commit/8d089d95d4d4e7c51a352b9f7fe981f332a120ad"}],"stats":{"total":7,"additions":4,"deletions":3},"files":[{"sha":"94b68448fa7b29592666bc81ab6e41dcf797fc6f","filename":"src/drivers/frsky_telemetry/frsky_telemetry.c","status":"modified","additions":1,"deletions":1,"changes":2,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020/src%2Fdrivers%2Ffrsky_telemetry%2Ffrsky_telemetry.c","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020/src%2Fdrivers%2Ffrsky_telemetry%2Ffrsky_telemetry.c","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fdrivers%2Ffrsky_telemetry%2Ffrsky_telemetry.c?ref=a402b3beeb51f56d6bde5f6f92a65a1e7a28b020","patch":"@@ -133,7 +133,7 @@ static void usage()\n static int frsky_telemetry_thread_main(int argc, char *argv[])\n {\n \t/* Default values for arguments */\n-\tchar *device_name = \"/dev/ttyS1\"; /* USART2 */\n+\tchar *device_name = \"/dev/ttyS6\"; /* USART8 */\n \n \t/* Work around some stupidity in task_create's argv handling */\n \targc -= 2;"},{"sha":"3adde806da985454341ba849d93b89e2c595b459","filename":"src/drivers/sPort_telemetry/sPort_telemetry.c","status":"modified","additions":3,"deletions":2,"changes":5,"blob_url":"https://github.com/PX4/PX4-Autopilot/blob/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020/src%2Fdrivers%2FsPort_telemetry%2FsPort_telemetry.c","raw_url":"https://github.com/PX4/PX4-Autopilot/raw/a402b3beeb51f56d6bde5f6f92a65a1e7a28b020/src%2Fdrivers%2FsPort_telemetry%2FsPort_telemetry.c","contents_url":"https://api.github.com/repos/PX4/PX4-Autopilot/contents/src%2Fdrivers%2FsPort_telemetry%2FsPort_telemetry.c?ref=a402b3beeb51f56d6bde5f6f92a65a1e7a28b020","patch":"@@ -185,8 +185,9 @@ static int sPort_telemetry_thread_main(int argc, char *argv[])\n \t\t/* wait for poll frame starting with value 0x7E\n \t\t* note that only the bus master is supposed to put a 0x7E on the bus.\n \t\t* slaves use byte stuffing to send 0x7E and 0x7D.\n+\t\t* we expect a poll frame every 12msec\n \t\t*/\n-\t\tint status = poll(fds, sizeof(fds) / sizeof(fds[0]), -1);\n+\t\tint status = poll(fds, sizeof(fds) / sizeof(fds[0]), 50);\n \n \t\tif (status < 1) { continue; }\n \n@@ -196,7 +197,7 @@ static int sPort_telemetry_thread_main(int argc, char *argv[])\n \t\tif (newBytes < 1 || sbuf[0] != 0x7E) { continue; }\n \n \t\t/* wait for ID byte */\n-\t\tstatus = poll(fds, sizeof(fds) / sizeof(fds[0]), -1);\n+\t\tstatus = poll(fds, sizeof(fds) / sizeof(fds[0]), 50);\n \n \t\tif (status < 1) { continue; }\n "}]}